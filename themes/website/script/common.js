function checkBrowserEnableCookie(){var e=!!navigator.cookieEnabled;return"undefined"!=typeof navigator.cookieEnabled||e||(document.cookie="testcookie",e=-1!=document.cookie.indexOf("testcookie")),!!e}function hura_create_cookie(e,t,n){if(n){var r=new Date;r.setTime(r.getTime()+24*n*60*60*1e3);var o="; expires="+r.toGMTString()}else var o="";document.cookie=e+"="+Base64.encode(t)+o+"; path=/;"}function hura_read_cookie(e){for(var t=e+"=",n=document.cookie.split(";"),r=0;r<n.length;r++){for(var o=n[r];" "==o.charAt(0);)o=o.substring(1,o.length);if(0==o.indexOf(t))return Base64.decode(o.substring(t.length,o.length))}return null}function hura_erase_cookie(e){hura_create_cookie(e,"",-1)}function countShoppingCart(e){var t=document.getElementById("count_shopping_cart_store"),n=document.getElementById("total_shopping_cart_store");if(null==hura_read_cookie(e))hura_create_cookie(e,"-",30),"underfined"!=t&&null!=t&&(t.innerHTML=0);else{var r=hura_read_cookie(e),o=r.split(",");if(number_product=o.length,"underfined"!=t&&null!=t&&(t.innerHTML=number_product-1),"underfined"!=n&&null!=n&&$("#total_shopping_cart_store").length>0){for(var i=0,a=0;a<o.length;a++)item_content=o[a],item_content.length>1&&(item_detail=item_content.split("-"),item_type=item_detail[0],pro_id=item_detail[1],pro_quantity=parseFloat(item_detail[2]),unit_price=parseFloat(item_detail[3]),i+=unit_price*pro_quantity);n.innerHTML=writeStringToPrice(i+"")}}}function emptyShoppingCart(e){hura_create_cookie(e,"-",30)}function addItemToCart(e,t,n,r){null==hura_read_cookie("shopping_cart_store")&&hura_create_cookie("shopping_cart_store",",",30);var o=hura_read_cookie("shopping_cart_store");if(-1==o.search(","+e+"-"+t+"-")){var i=o+","+e+"-"+t+"-"+n+"-"+r;hura_create_cookie("shopping_cart_store",i,30)}"pro"==e&&ProductAddon.checkSelect(t)}function addToShoppingCart(e,t,n,r){addItemToCart(e,t,n,r),window.location=SHOPPING_CART_URL}function addToShoppingCartStop(e,t,n,r,o){addItemToCart(e,t,n,r);var i=document.getElementById(o);"undefined"!=typeof i&&null!=i&&$("#"+o).html("Đã thêm vào giỏ hàng")}function isItemInCart(e,t){var n=hura_read_cookie("shopping_cart_store");null!=n&&-1!=n.search(","+e+"-"+t+"-")&&document.write("Đang trong giỏ hàng")}function deleteShoppingCartItem(e,t){confirm("Bạn muốn xóa bỏ sản phẩm này khỏi giỏ hàng ? ")&&(removeShoppingCartItem(e,t),window.location=SHOPPING_CART_URL)}function removeShoppingCartItem(e,t){var n=hura_read_cookie("shopping_cart_store");if(null!=n){n+=",";var r=new RegExp(","+e+"-"+t+"-(.*?)-(.*?),","i");new_cart=n.replace(r,","),new_cart=new_cart.substr(0,new_cart.length-1),hura_create_cookie("shopping_cart_store",new_cart,30),ProductAddon.removeProduct(t)}}function writeStringToPrice(e){var t="",n="usd"==default_price_currency?",":".";"usd"==default_price_currency&&(t=-1!=e.lastIndexOf(".")?e.replace(e.substr(0,e.lastIndexOf(".")),""):"",e=e.replace(t,""));for(var r=e.substr(0,e.length%3),o=e.replace(r,""),i=o.length/3,a="",c=0;i>c;c++)group_of_three=o.substr(3*c,3),a+=group_of_three,c!=i-1&&(a+=n);return r.length>0?""!=a?r+n+a+t:r+t:""!=a?a+t:""}function getItemQuantity(e,t){var n=document.getElementById("quantity_"+e+"_"+t).value;return n=parseInt(n)}function updatePriceAndCheckStock(e,t,n,r,o){check_interger(n)?n>r&&(alert("Hiện tại trong kho chỉ có "+r+" sản phẩm này, quý khách vui lòng nhập lại"),n=o,$("#quantity_"+e+"_"+t).val(o)):(alert("Vui lòng nhập số > 0"),n=o,$("#quantity_"+e+"_"+t).val(o)),show_cart_total(e,t,n)}function check_interger(e){var t=/^\d+$/;return t.test(e)?parseInt(e)>0:!1}function reCountTotal(){var e="",t=document.getElementById("item_update_quantity").value;all_item_array=t.split(",");var n=0;combo_array=new Array;for(var r=0;r<all_item_array.length;r++)if(item_id=all_item_array[r],item_id.length>0){if(unformat_price=document.getElementById("sell_price_"+item_id.replace("-","_")).innerHTML,"usd"==default_price_currency)for(;unformat_price.indexOf(",")>0;)unformat_price=unformat_price.replace(",","");else for(;unformat_price.indexOf(".")>0;)unformat_price=unformat_price.replace(".","");item_price=parseFloat(unformat_price),item_quantity=parseInt(document.getElementById("quantity_"+item_id.replace("-","_")).value),e+=","+item_id+"-"+item_quantity+"-"+item_price,n+=item_price*item_quantity}hura_create_cookie("shopping_cart_store",e,30),document.getElementById("total_value").innerHTML=writeStringToPrice(n+""),document.getElementById("total_cart_value").value=n;var o=document.getElementById("total_shopping_cart_store");"undefined"!=o&&null!=o&&(o.innerHTML=writeStringToPrice(n+""))}function isNumber(e){return!isNaN(parseFloat(e))&&isFinite(e)}function makeUrlAcceptQuery(e){return e.search("?")>0?e:e+"?"}function checkCartForm(){var e=hura_read_cookie("shopping_cart_store");if(null==e)return!1;var t=e.split(",");if(number_product=t.length,number_product<=1)return confirm("Giỏ hàng chưa có sản phẩm. Vui lòng chọn sản phẩm vào giỏ hàng")&&(window.location="/"),!1;var n="",r=document.getElementById("buyer_name").value;r.length<4&&(n+="- Bạn chưa nhập tên\n");var o=document.getElementById("buyer_mobile").value;o.length<5&&(n+="- Bạn chưa nhập số di động\n");var i=document.getElementById("buyer_address").value;return i.length<10&&(n+="- Bạn chưa nhập địa chỉ"),""!=n?(alert(n),!1):!0}function add_compare_product(e){var t=document.getElementById("product_compare_list");if("undefined"==t||null==t)return alert("Cần có biến product_compare_list trong template"),!1;""==t.value&&(t.value=",");var n=0;t.value.length>1&&(current_list_id=t.value.split(","),n=current_list_id.length-1);var r=document.getElementById("compare_box_"+e),o=document.getElementById("text_compare_"+e);r.checked?n>6?(r.checked="",alert("Bạn chỉ có thể so sánh tối đa 6 sản phẩm\nDanh sách đã có đủ 6")):(document.getElementById("product_compare_list").value=t.value+e+",","undefined"!=o&&null!=o&&(o.innerHTML="Chờ so sánh",o.style.backgroundColor="#FFCC00")):(document.getElementById("product_compare_list").value=t.value.replace(","+e+",",","),"undefined"!=o&&null!=o&&(o.innerHTML="Chọn so sánh ",o.style.backgroundColor="#FFF"))}function compare_product(){var e=document.getElementById("product_compare_list");if("undefined"==e||null==e)return alert("Cần có biến product_compare_list trong template"),!1;var t=0;return e.value.length>1&&(current_list_id=e.value.split(","),t=current_list_id.length-2),t>1?void(window.location="/so-sanh?list="+e.value):(alert("Bạn cần chọn tối thiểu 2 sản phẩm để so sánh"),!1)}function save_product_view_history(e){if(!check_interger(e))return!1;var t="product_view_history";null==hura_read_cookie(t)&&hura_create_cookie(t,",",30);var n=hura_read_cookie(t);if(-1==n.search(","+e+",")){var r=n+","+e+",";hura_create_cookie(t,r,30)}}function remove_from_history(e){if(confirm("Bạn chắc chắn muốn xóa sản phẩm này ?")){if(!check_interger(e))return!1;var t="product_view_history";null==hura_read_cookie(t)&&hura_create_cookie(t,",",30);var n=hura_read_cookie(t);if(-1!=n.search(","+e+",")){var r=n.replace(","+e+",",",");hura_create_cookie(t,r,30)}window.location=window.location}}function user_like_content(e,t,n){$.post("/ajax/user_like.php",{item_id:e,content_type:t},function(e){"error-not-login"==e?confirm("Để sử dụng chức năng này bạn cần đăng nhập. Click OK để đăng nhập")&&(window.location="/dang-nhap?returnTo="+window.location):"error"==e?alert("Bạn đã thực hiện rồi"):$("#"+n).html(e)})}function user_vote_review(e,t){$.post("/ajax/vote_product_review.php",{review_id:e,vote:t},function(e){if("error-not-login"==e)confirm("Để sử dụng chức năng này bạn cần đăng nhập. Click OK để đăng nhập")&&(window.location="/dang-nhap?return_url="+window.location);else if("error-has-voted"==e)alert("Bạn đã chọn rồi");else if("dislike"==t){if(message="Bạn không đồng ý với ý kiến này. Bạn có thể muốn viết ý kiến của mình không ?",confirm(message)){var n=window.location,r=encodeURI(n).replace("=review","=write-review");-1==r.search("=write-review")&&(r+="?section=write-review"),window.location=r}}else alert("Cảm ơn bạn đã bày tỏ quan điểm")})}function check_discount(e,t,n){"coupon"==e&&($("#checking_discount_code").html("vui lòng đợi..."),$.post("ajax/check_coupon.php",{code:t,order:n},function(e){var t=jQuery.parseJSON(e);if(""!=t.error)$("#checking_discount_code").html(t.error),$("#discount_code").val("");else{for(var n="",r=0,o=document.getElementById("total_value").innerHTML;o.indexOf(".")>0;)o=o.replace(".","");switch(t.type){case"pro":n=t.content;break;case"cash":n="Giảm "+writeStringToPrice(t.content+"")+" đ",r=parseInt(o)-parseInt(t.content),$("#total_value").html(writeStringToPrice(r+""));break;case"priceoff":n="Giảm "+t.content+"%",r=parseInt(o)*parseInt(100-t.content)/100,$("#total_value").html(writeStringToPrice(r+""));break;case"other":n=t.content}$("#checking_discount_code").html(t.title+": "+n),$("#discount_message").html(t.title+": "+n)}}))}function loadAjaxContent(e,t){if($("#anchor_top").length>0){var n=$("#anchor_top").offset(),r=n.top;$("html, body").animate({scrollTop:r},500)}$("#"+e).load(t)}function change_captcha(e){var t=(new Date).getTime();$("#"+e).attr("src","/includes/captcha/captcha.php?v="+t)}function user_cancel_order(e,t){return"new"!=t?(alert("Bạn chỉ hủy được đơn hàng chưa được xử lý. Vui lòng liên hệ bộ phận hỗ trợ của chúng tôi"),!1):void(confirm("Bạn chắc chắn muốn hủy đơn hàng này ?")&&$.post("/ajax/user_account.php",{action:"cancel-order",order_id:e,status:t},function(){alert("Bạn đã hủy đơn thành công !")}))}function user_vote_review(e,t){$.post("/ajax/vote_product_review.php",{review_id:e,vote:t},function(e){if("error-not-login"==e)confirm("Để sử dụng chức năng này bạn cần đăng nhập. Click OK để đăng nhập")&&(window.location="/dang-nhap?return_url="+window.location);else if("error-has-voted"==e)alert("Bạn đã chọn rồi");else if("dislike"==t){if(message="Bạn không đồng ý với ý kiến này. Bạn có thể muốn viết ý kiến của mình không ?",confirm(message)){var n=window.location,r=encodeURI(n).replace("=review","=write-review");-1==r.search("=write-review")&&(r+="?section=write-review"),window.location=r}}else alert("Cảm ơn bạn đã bày tỏ quan điểm")})}function get_product_category(e,t){$.get("/ajax/get_product_category.php",{cat_id:e},function(e){$("#"+t).append(e)})}var Base64={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(e){var t,n,r,o,i,a,c,u="",_=0;for(e=Base64._utf8_encode(e);_<e.length;)t=e.charCodeAt(_++),n=e.charCodeAt(_++),r=e.charCodeAt(_++),o=t>>2,i=(3&t)<<4|n>>4,a=(15&n)<<2|r>>6,c=63&r,isNaN(n)?a=c=64:isNaN(r)&&(c=64),u=u+this._keyStr.charAt(o)+this._keyStr.charAt(i)+this._keyStr.charAt(a)+this._keyStr.charAt(c);return u},decode:function(e){var t,n,r,o,i,a,c,u="",_=0;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");_<e.length;)o=this._keyStr.indexOf(e.charAt(_++)),i=this._keyStr.indexOf(e.charAt(_++)),a=this._keyStr.indexOf(e.charAt(_++)),c=this._keyStr.indexOf(e.charAt(_++)),t=o<<2|i>>4,n=(15&i)<<4|a>>2,r=(3&a)<<6|c,u+=String.fromCharCode(t),64!=a&&(u+=String.fromCharCode(n)),64!=c&&(u+=String.fromCharCode(r));return u=Base64._utf8_decode(u)},_utf8_encode:function(e){e=e.replace(/\r\n/g,"\n");for(var t="",n=0;n<e.length;n++){var r=e.charCodeAt(n);128>r?t+=String.fromCharCode(r):r>127&&2048>r?(t+=String.fromCharCode(r>>6|192),t+=String.fromCharCode(63&r|128)):(t+=String.fromCharCode(r>>12|224),t+=String.fromCharCode(r>>6&63|128),t+=String.fromCharCode(63&r|128))}return t},_utf8_decode:function(e){for(var t="",n=0,r=c1=c2=0;n<e.length;)r=e.charCodeAt(n),128>r?(t+=String.fromCharCode(r),n++):r>191&&224>r?(c2=e.charCodeAt(n+1),t+=String.fromCharCode((31&r)<<6|63&c2),n+=2):(c2=e.charCodeAt(n+1),c3=e.charCodeAt(n+2),t+=String.fromCharCode((15&r)<<12|(63&c2)<<6|63&c3),n+=3);return t}},default_price_currency="usd",SHOPPING_CART_URL="/gio-hang",ProductAddon={addCart:function(e,t){console.log("selected_addon ="+t),null==hura_read_cookie("shopping_cart_addon")&&hura_create_cookie("shopping_cart_addon",",",30);var n=hura_read_cookie("shopping_cart_addon");if(-1==n.search(","+e+":"+t+",")){var r=","+e+":"+t+n;hura_create_cookie("shopping_cart_addon",r,30)}else console.log("đã có trong giỏ hàng: "+n)},removeFromCart:function(e,t){var n=hura_read_cookie("shopping_cart_addon");if(null!=n&&-1!==n.search(","+e+":"+t)){var r=n.replace(","+e+":"+t,",");hura_create_cookie("shopping_cart_addon",r,30),window.location=SHOPPING_CART_URL}},removeProduct:function(e){var t=hura_read_cookie("shopping_cart_addon");if(null!=t){var n=new RegExp(","+e+":([0-9]+),","i"),r=t.replace(n,",");hura_create_cookie("shopping_cart_addon",r,30)}},checkSelect:function(e){var t=this;$(".product-addon-"+e).each(function(){if($(this).prop("checked")){var n=parseInt(this.value);n>0&&t.addCart(e,n)}})}};window.top!==window.self&&window.top.location.replace(window.self.location.href),$(document).ready(function(){countShoppingCart("shopping_cart_store")});